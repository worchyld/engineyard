This game is called `Locomotive Werks`.

The game is for 3-5 players.
The winner is the player with the most money.
The game is played over several rounds, starting with the first player and going in turn order.

There are 7 stages of each round.

The game is played in rounds, where each round consists of the following phases.  Each phase is performed in turn order.

1. Locomotive development; where a player may purchase 1 new locomotive
2. Production capacity; where a player may improve production capacities
3. Locomotive production; where players may sell locomotives
4. Pay taxes; where all players must pay 10% tax rounded down
5. Check for winner. If one or multiple players have 300 coins after paying tax, the game is over.
6. Establish new turn order
7. Market demands 

Game board

In the game there is 1 game board which holds 14 spaces.

Each space holds information about the kind of locomotives in that space.

Each space holds this information:

Each space shows:
The `Existing Orders` for a certain locomotive
The `Initial Orders` and locomotive data 
The `Customer Base` for a certain locomotive.

Locomotive data is:
* Development cost (or cost) (Integer)
* Production (Integer)
* Income (Integer)
* Generation (Integer)
* Color of the locomotive

Each space of the board is exactly in this sequence from this JSON block.  Note, all integers provided are fixed and can never change.

`
{
  "locomotive_colors": {
    "1": "green",
    "2": "red",
    "3": "yellow",
    "4": "blue"
  },
  "generations": {
    "1": "first",
    "2": "second",
    "3": "third",
    "4": "fourth",
    "5": "fifth"
  },
  "1st generation green": {
    "generation": 1,
    "color": 1,
    "Cost": 4,
    "Production": 2,
    "Income": 1,
    "Existing orders": 3,
    "Initial Orders": 1,
    "Customer Base": 3
  },
  "1st generation red": {
    "generation": 1,
    "color": 2,
    "Cost": 8,
    "Production": 2,
    "Income": 2,
    "Existing orders": 3,
    "Initial Orders": 1,
    "Customer Base": 3
  },
  "1st generation yellow": {
    "generation": 1,
    "color": 3,
    "Cost": 12,
    "Production": 6,
    "Income": 3,
    "Existing Orders": 2,
    "Initial Orders": 1,
    "Customer Base": 2
  },
  "1st generation blue": {
    "generation": 1,
    "color": 4,
    "Cost": 16,
    "Production": 8,
    "Income": 4,
    "Existing Orders": 1,
    "Initial Orders": 1,
    "Customer Base": 1
  },
  "2nd generation green": {
    "generation": 2,
    "color": 1,
    "Cost": 20,
    "Production": 10,
    "Income": 5,
    "Existing Orders": 4,
    "Initial Orders": 1,
    "Customer Base": 4
  },
  "2nd generation red": {
    "generation": 2,
    "color": 2,
    "Cost": 24,
    "Production": 12,
    "Income": 6,
    "Existing Orders": 3,
    "Initial Orders": 1,
    "Customer Base": 3
  },
  "2nd generation yellow": {
    "generation": 2,
    "color": 3,
    "Cost": 28,
    "Production": 16,
    "Income": 7,
    "Existing Orders": 3,
    "Initial Orders": 1,
    "Customer Base": 3
  },
  "3rd generation green": {
    "generation": 3,
    "color": 1,
    "Cost": 32,
    "Production": 16,
    "Income": 8,
    "Existing Orders": 4,
    "Initial Orders": 1,
    "Customer Base": 4
  },
  "2nd generation blue": {
    "generation": 2,
    "color": 4,
    "Cost": 36,
    "Production": 18,
    "Income": 9,
    "Existing Orders": 2,
    "Initial Orders": 1,
    "Customer Base": 2
  },
  "3rd generation red": {
    "generation": 3,
    "color": 2,
    "Cost": 40,
    "Production": 20,
    "Income": 10,
    "Existing Orders": 4,
    "Initial Orders": 1,
    "Customer Base": 4
  },
  "4th generation green": {
    "generation": 4,
    "color": 1,
    "Cost": 44,
    "Production": 22,
    "Income": 11,
    "Existing Orders": 5,
    "Initial Orders": 1,
    "Customer Base": 5
  },
  "3rd generation yellow": {
    "generation": 3,
    "color": 3,
    "Cost": 48,
    "Production": 26,
    "Income": 12,
    "Existing Orders": 3,
    "Initial Orders": 1,
    "Customer Base": 3
  },
  "4th generation red": {
    "generation": 4,
    "color": 2,
    "Cost": 52,
    "Production": 26,
    "Income": 13,
    "Existing Orders": 4,
    "Initial Orders": 1,
    "Customer Base": 4
  },
  "5th generation green": {
    "generation": 5,
    "color": 1,
    "Cost": 56,
    "Production": 28,
    "Income": 14,
    "Existing Orders": 5,
    "Initial Orders": 1,
    "Customer Base": 5
  }
}
`

From this we can see that there are:
There are 4 colours of locomotive: green, red, yellow, blue
There are 5 generations: first, second, third, fourth, fifth

In the game there are 43 locomotives cards;
* 20 passenger locomotives (green), where:
	* 4 First generation
	* 4 Second generation
	* 4 Third generation
	* 4 Fourth generation
	* 4 Fifth generation
* 13 fast locomotives (red), where:
	* 3 First generation
	* 3 Second generation
	* 3 Third generation
	* 4 Fourth generaiton
	* 0 Fifth generation
* 7 frieght locomotives (yellow), where:
	* 2 First generation
	* 2 Second generation
	* 3 Third generation
	* 0 Fourth generation
	* 0 Fifth generaiton
* 3 special locomotives (blue), where:
	* 1 first generation
	* 2 second generation
	* 0 third generation
	* 0 fourth generation
	* 0 fifth generation

Where `existing orders`, `initial orders` and `customer base` are; these will be occupied by dice.  

We can assume that that these are arrays, except initial orders which is only ever 1 die.  

The max capacity of each array is the number depicted in the variable `existing orders` and `customer base`.   Thus, if it says `existing orders` is 3 this means that there can only ever be 0, 1, 2 or 3 dice in this array; but no more than this.

Game Setup:

Each player gets 12 coins

Go through each space of the board, and fill this space with cards from the same generation (ie: first generation) and same colour (green).  This means the first space should recieve 4 first generation green cards.

Only the first two board spaces will be seeded with dice:

The first game board space will have 3 dice rolled and added to the existing orders section.

The second game board space will have 1 dice rolled and put into the initial orders section.

Shuffle the turn order; and assign each player their respective turn order position.

Stage: Locomotive development

During this phase, the active player may purchase a locomotive.

The active player must be able to afford the cost.

The active player can only buy a locomotive if there are any locomotive cards remaining.

The active player can only buy each locomotive type once; that is to say, they can only ever purchase a first generation green locomotive once ever in the entire game.

After purchasing a locomotive, they take a locomotive card that matches the type (ie: first generation green) and adds it to their tableau.  Additionally, they get 1 unit of production which is tied to this locomotive card.

After purchasing, if the locomotive they purchased was the most advanced (ie: It had a die in the initial orders section), then the the initial order moves to the existing orders section.

When the Third, Fourth or Fifth generation of a locomotive type is purchased, remove all purchased locomotive cards of that type that are two generations older from the game board.

Once they have completed their action, it is the next players turn.

Once 

Stage: Production capacity

During this phase, each player on their turn may purchase additional production capacity for his locomotive production. In addition, a player may shift Production Units from older technology locomotive cards to newer technology locomotive cards.

The amount of production capacity the player may purchase or shift is not limited â€“ as long as he can pay the costs.
When purchasing new production capacity, the player must pay the production costs to the bank; he then takes the appropriate counter(s) and places it (or them) on the locomotive card.

When shifting production capacities from older techno- logy cards to newer technology cards, the player simply transfers the Production Unit counters from one loco- motive card to the other. In addition, he must pay the difference of production costs to the Bank.

Important
A player may only upgrade Production Capacities, i.e., he cannot shift capacities from newer technology cards to older technology cards! Trade-ins are not allowed.
(A player may not trade 2 Production Units of a First Generation Passenger locomotive for 1 Production Unit of a First Generation Fast locomotive.)


Phase: Market demands

In this phase, new Existing Orders for marketable locomotives are determined and Existing Orders for old and obsolete locomotives are cancelled. The current start player performs this task. It consists of four steps, each step dedicated to one locomotive type:

1. Market for Passenger locomotives (green) 
2. Market for Fast locomotives (red)
3. Market for Freight locomotives (yellow)
4. Market for Special locomotives (blue)

Determine how many generations of that locomotive type currently exist. A generation exists if there are dice in either the Existing Orders boxes or the Customer Base boxes or in both.

The maximum number of dice for a locomotive type and generation is determined by the number of boxes in the Customer Base.

The current number of dice for a locomotive type and generation is determined by the number of dice in the Customer Base boxes added to any in the Existing Orders boxes.

There are 4 cases of existing generations: a) No generation exists:

Nothing is done for this type.

b) 1 generation exists:
If this locomotive type does not have the maximum number of dice, add one die to the Customer Base from the dice pool. Then roll all dice in the Customer Base and place them in the empty Existing Order boxes for that locomotive type.

c) 2 generations exist:
The players begin with the older (lower generation number) locomotive.

Transfer one of the dice from the Customer Base to the dice pool.

Then roll any remaining dice in the Customer Base and place them in the empty Existing Order boxes for that locomotive. This locomotive is considered old.

The newer generation is now checked. If this loco- motive type does not have the maximum number of dice, add 1 die to the Customer Base from the dice pool. Then the dice in the Customer Base are rolled and placed in the empty Existing Order boxes for that locomotive.

d) 3 generations exist:
The players begin with the oldest (lowest generation number) locomotive. Place all dice from the Custo- mer Base and Existing Orders areas back in the dice pool. This locomotive is obsolete â€“ there is no demand for this generation of that locomotive type anymore.

The players continue with the next (middle generation number) locomotive. If needed, add enough dice from the dice pool to the Customer Base to match the maximum number of dice for that locomotive. 

Then roll all dice in the Customer Base and place them in the empty Existing Order boxes for that locomotive.

Finally, the newest (highest generation number) locomotive is checked. If this locomotive does not have the maximum number of dice, add 1 die to the Customer Base from the dice pool. 

Then all dice in the Customer Base are rolled and are placed in the empty Existing Order boxes for that locomotive type.

Repeat this procedure for all four locomotive types in the order stated above.

When the Market Demands phase is complete.
